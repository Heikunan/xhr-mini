!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.miniXhr=t():e.miniXhr=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var o=t.method,n=void 0===o?"GET":o,r=t.mode,i=void 0===r?"xhr":r,u=t.dataType,s=void 0===u?"":u,a=t.data,c=void 0===a?{}:a,d=t.timeout,l=void 0===d?0:d,p=t.ontimeoutCB,f=void 0===p?null:p;return new Promise(function(t,o){var r="";for(var u in c){var a="";r&&(a="&"),r+=a+u+"="+c[u]}if("xhr"===i){var d=new XMLHttpRequest;d.open(n,e,!0),d.onreadystatechange=function(){4===this.readyState&&(this.status>=200&&this.status<400?t(this.response):o(new Error(this.statusText)))},d.timeout=l,f&&(d.ontimeout=f),"json"===s?(d.responseType="json",d.setRequestHeader("Accept","application/json")):d.setRequestHeader("Accept","*/*"),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),d.send(r)}else{var p=document.querySelector("head"),m=document.createElement("script");if(m.src=e,m.type="text/javascript","script"===i){r&&(m.src+="?"+r);var v=function(e){p.removeChild(m),clearTimeout(m.timer),t(e)};m.addEventListener("load",v,!1),l&&(m.timer=setTimeout(function(){m.removeEventListener("load",v,!1),p.removeChild(m),o(new Error("timeout"))},l))}else if("jsonp"===i){var h=("jsonp_"+Math.random()).replace(".","");window[h]=function(e){p.removeChild(m),clearTimeout(m.timer),window[h]=null,t(e)},m.src+=r?"?"+r+"&callback="+h:"?callback="+h,l&&(m.timer=setTimeout(function(){p.removeChild(m),window[h]=null,o(new Error("timeout"))},l))}p.appendChild(m)}})}}]).default});