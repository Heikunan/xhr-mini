!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.miniXhr=t():e.miniXhr=t()}(window,function(){return function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t),t.default=function(e,t){var o=t.method,r=void 0===o?"GET":o,n=t.mode,i=void 0===n?"xhr":n,u=t.dataType,a=void 0===u?"":u,s=t.data,c=void 0===s?{}:s,d=t.timeout,l=void 0===d?0:d,p=t.ontimeoutCB,f=void 0===p?null:p;return new Promise(function(t,o){var n="";for(var u in c){var s="";n&&(s="&"),n+=s+u+"="+c[u]}if("xhr"===i){var d=new XMLHttpRequest;d.open(r,e,!0),d.onreadystatechange=function(){4===this.readyState&&(this.status>=200&&this.status<400?t(this.response):o(new Error(this.statusText)))},d.timeout=l,f&&(d.ontimeout=f),"json"===a?(d.responseType="json",d.setRequestHeader("Accept","application/json")):d.setRequestHeader("Accept","*/*"),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),d.send(n)}else{var p=document.querySelector("head"),m=document.createElement("script");if(m.src=e,m.type="text/javascript","script"===i){n&&(m.src+="?"+n);var v=function(e){p.removeChild(m),clearTimeout(m.timer),t(e)};m.addEventListener("load",v,!1),l&&(m.timer=setTimeout(function(){m.removeEventListener("load",v,!1),p.removeChild(m),o(new Error("timeout"))},l))}else if("jsonp"===i){var h=("jsonp_"+Math.random()).replace(".","");window[h]=function(e){p.removeChild(m),clearTimeout(m.timer),window[h]=null,t(e)},m.src+=n?"?"+n+"&callback="+h:"?callback="+h,l&&(m.timer=setTimeout(function(){p.removeChild(m),window[h]=null,o(new Error("timeout"))},l))}p.appendChild(m)}})}}]).default});